# 播放统计功能特性清单

## 特性概述
本特性用于统计每首歌曲的播放次数，提供基于歌曲名称、专辑名称和作者名称的唯一统计，并支持通过HTTP API查询播放统计数据。

## 功能要点
1. 统计表设计：
   - 使用歌曲名称+专辑名称+作者名称作为唯一键
   - 包含播放次数和版本号字段
   - 支持乐观锁机制防止并发问题

2. 数据操作：
   - 自动在播放记录保存时更新统计表
   - 实现播放次数增加的乐观锁机制
   - 支持查询特定歌曲的播放次数
   - 支持分页查询播放次数统计

3. HTTP API接口：
   - GET /api/track-play-counts：获取播放次数统计（支持分页）
   - GET /api/track-play-count：获取特定歌曲的播放次数
   - GET /health：健康检查端点

4. 并发安全：
   - 使用乐观锁机制确保在高并发场景下播放次数的准确性
   - 处理并发创建记录的情况

## 实现细节
1. 数据库表名：track_play_counts
2. 唯一索引：idx_track_album_artist (artist, album, track)
3. 乐观锁字段：version，默认值为1
4. API默认端口：8080
5. 分页查询默认限制：每页最多100条记录

## 扩展性考虑
1. 表结构设计支持添加更多统计字段
2. API接口设计支持扩展更多查询维度
3. 乐观锁机制可以适应更高的并发场景